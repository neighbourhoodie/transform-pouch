!function(){var t={};(function(n){(function(){"use strict";var e,r,o=n.MutationObserver||n.WebKitMutationObserver;if(o){var i=0,u=new o(f),c=n.document.createTextNode("");u.observe(c,{characterData:!0}),e=function(){c.data=i=++i%2}}else if(n.setImmediate||void 0===n.MessageChannel)e="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var t=n.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},n.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var s=new n.MessageChannel;s.port1.onmessage=f,e=function(){s.port2.postMessage(0)}}var a=[];function f(){var t,n;r=!0;for(var e=a.length;e;){for(n=a,a=[],t=-1;++t<e;)n[t]();e=a.length}r=!1}t=function(t){1!==a.push(t)||r||e()}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var n={};function e(){}var r={},o=["REJECTED"],i=["FULFILLED"],u=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==e&&l(this,t)}function s(t,n,e){this.promise=t,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof e&&(this.onRejected=e,this.callRejected=this.otherCallRejected)}function a(n,e,o){t((function(){var t;try{t=e(o)}catch(i){return r.reject(n,i)}t===n?r.reject(n,new TypeError("Cannot resolve promise with itself")):r.resolve(n,t)}))}function f(t){var n=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof n)return function(){n.apply(t,arguments)}}function l(t,n){var e=!1;function o(n){e||(e=!0,r.reject(t,n))}function i(n){e||(e=!0,r.resolve(t,n))}var u=h((function(){n(i,o)}));"error"===u.status&&o(u.value)}function h(t,n){var e={};try{e.value=t(n),e.status="success"}catch(r){e.status="error",e.value=r}return e}n=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,n){if("function"!=typeof t&&this.state===i||"function"!=typeof n&&this.state===o)return this;var r=new this.constructor(e);return this.state!==u?a(r,this.state===i?t:n,this.outcome):this.queue.push(new s(r,t,n)),r},s.prototype.callFulfilled=function(t){r.resolve(this.promise,t)},s.prototype.otherCallFulfilled=function(t){a(this.promise,this.onFulfilled,t)},s.prototype.callRejected=function(t){r.reject(this.promise,t)},s.prototype.otherCallRejected=function(t){a(this.promise,this.onRejected,t)},r.resolve=function(t,n){var e=h(f,n);if("error"===e.status)return r.reject(t,e.value);var o=e.value;if(o)l(t,o);else{t.state=i,t.outcome=n;for(var u=-1,c=t.queue.length;++u<c;)t.queue[u].callFulfilled(n)}return t},r.reject=function(t,n){t.state=o,t.outcome=n;for(var e=-1,r=t.queue.length;++e<r;)t.queue[e].callRejected(n);return t},c.resolve=function(t){return t instanceof this?t:r.resolve(new this(e),t)},c.reject=function(t){var n=new this(e);return r.reject(n,t)},c.all=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var o=t.length,i=!1;if(!o)return this.resolve([]);for(var u=new Array(o),c=0,s=-1,a=new this(e);++s<o;)f(t[s],s);return a;function f(t,e){n.resolve(t).then((function(t){u[e]=t,++c!==o||i||(i=!0,r.resolve(a,u))}),(function(t){i||(i=!0,r.reject(a,t))}))}},c.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);for(var i,u=-1,c=new this(e);++u<n;)i=t[u],this.resolve(i).then((function(t){o||(o=!0,r.resolve(c,t))}),(function(t){o||(o=!0,r.reject(c,t))}));return c};var d,p=(d=n)&&"object"==typeof d&&"default"in d?d.default:d,v="function"==typeof Promise?Promise:p;Object.create;for(var y={},m=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],g=0;g<m.length;g++){var w=m[g];y["[object "+w+"]"]=w.toLowerCase()}var b=y.toString,j=y.hasOwnProperty;function T(t){return null===t?String(t):"object"==typeof t||"function"==typeof t?y[b.call(t)]||"object":typeof t}function k(t){if(!t||"object"!==T(t)||t.nodeType||function(t){return null!==t&&t===t.window}(t))return!1;try{if(t.constructor&&!j.call(t,"constructor")&&!j.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in t);return void 0===n||j.call(t,n)}function E(t){return"function"===T(t)}var I=Array.isArray||function(t){return"array"===T(t)};function _(t,n,e){var r,o,i,u,c,s,a,f=n[0]||{},l=1,h=n.length,d=!1,p=/\d+/;for("boolean"==typeof f&&(d=f,f=n[1]||{},l=2),"object"==typeof f||E(f)||(f={}),h===l&&(f=this,--l);l<h;l++)if(null!=(r=n[l]))for(o in a=I(r),r)if(!(o in Object.prototype)){if(a&&!p.test(o))continue;if(i=f[o],f===(u=r[o]))continue;d&&u&&(k(u)||(c=I(u)))?(c?(c=!1,s=i&&I(i)?i:[]):s=i&&k(i)?i:{},t.push({args:[d,s,u],result:{container:f,key:o}})):void 0!==u&&(I(r)&&E(u)||(f[o]=u))}e.container[e.key]=f}var P,A,O,x=function(){for(var t=[],n=-1,e=arguments.length,r=new Array(e);++n<e;)r[n]=arguments[n];var o,i={};for(t.push({args:r,result:{container:i,key:"key"}});o=t.pop();)_(t,o.args,o.result);return i.key},D=P={};function C(){throw new Error("setTimeout has not been defined")}function q(){throw new Error("clearTimeout has not been defined")}function L(t){if(A===setTimeout)return setTimeout(t,0);if((A===C||!A)&&setTimeout)return A=setTimeout,setTimeout(t,0);try{return A(t,0)}catch(n){try{return A.call(null,t,0)}catch(n){return A.call(this,t,0)}}}!function(){try{A="function"==typeof setTimeout?setTimeout:C}catch(t){A=C}try{O="function"==typeof clearTimeout?clearTimeout:q}catch(t){O=q}}();var R,F=[],M=!1,S=-1;function N(){M&&R&&(M=!1,R.length?F=R.concat(F):S=-1,F.length&&W())}function W(){if(!M){var t=L(N);M=!0;for(var n=F.length;n;){for(R=F,F=[];++S<n;)R&&R[S].run();S=-1,n=F.length}R=null,M=!1,function(t){if(O===clearTimeout)return clearTimeout(t);if((O===q||!O)&&clearTimeout)return O=clearTimeout,clearTimeout(t);try{O(t)}catch(n){try{return O.call(null,t)}catch(n){return O.call(this,t)}}}(t)}}function B(t,n){this.fun=t,this.array=n}function G(){}D.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];F.push(new B(t,n)),1!==F.length||M||L(W)},B.prototype.run=function(){this.fun.apply(null,this.array)},D.title="browser",D.browser=!0,D.env={},D.argv=[],D.version="",D.versions={},D.on=G,D.addListener=G,D.once=G,D.off=G,D.removeListener=G,D.removeAllListeners=G,D.emit=G,D.prependListener=G,D.prependOnceListener=G,D.listeners=function(t){return[]},D.binding=function(t){throw new Error("process.binding is not supported")},D.cwd=function(){return"/"},D.chdir=function(t){throw new Error("process.chdir is not supported")},D.umask=function(){return 0};var J={};(function(t){(function(){"use strict";J.Promise=v,J.extend=x,J.clone=function(t){return J.extend(!0,{},t)},J.isLocalId=function(t){return/^_local/.test(t)}}).call(this)}).call(this,P);var K=function(t,n){"function"==typeof n&&t.then((function(t){n(null,t)}),(function(t){n(t,null)}))},U={};function z(t,n,e){for(var r in n)if(n.hasOwnProperty(r)){var o=H(t,r),i=o.base[o.name];if(i)if(i.hasOwnProperty("_handlers")){if(-1!==i._handlers.indexOf(n[r]))throw new Error("Wrapper method for '"+r+"' already installed: "+n[r]);i._handlers.push(n[r])}else o.base[o.name]=e(r,i,n[r],t)}}function H(t,n){for(n=n.split(".");n.length>1;)t=t[n.shift(0)];return{base:t,name:n[0]}}function Q(t,n,e,r,o){var i=r[t];if(void 0===i)throw new Error("No known wrapper for method name: "+t);var u=[e],c=i(o,n,u);return c._original=n,c._handlers=u,c}U.installWrapperMethods=function(t,n){z(t,n,U.createWrapperMethod)},U.createWrapperMethod=function(t,n,e,r){return Q(t,n,e,V,r)};var V={destroy:function(t,n,e){return function(r,o){var i=Y(t,this,r,o);return Z(e,i,$(n))}},put:function(t,n,e){return function(){var r={};r.base=t||this;var o=Array.prototype.slice.call(arguments);r.doc=o.shift();var i="_id"in r.doc;do{var u=o.shift(),c=typeof u;"string"!==c||i?"string"!==c||!i||"_rev"in r.doc?"object"===c?r.options=u:"function"===c&&(r.callback=u):r.doc._rev=u:(r.doc._id=u,i=!0)}while(o.length);return r.options=r.options||{},Z(e,r,(function(){return n.call(this,r.doc,r.options)}))}},post:function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.doc=r,Z(e,u,(function(){return n.call(this,u.doc,u.options)}))}},get:function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.docId=r,Z(e,u,(function(){return n.call(this,u.docId,u.options)}))}},remove:function(t,n,e){return function(r,o,i,u){var c;return"string"==typeof o?(c=Y(t,this,i,u)).doc={_id:r,_rev:o}:(c=Y(t,this,o,i)).doc=r,Z(e,c,(function(){return n.call(this,c.doc,c.options)}))}},bulkDocs:function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return"object"==typeof r&&"new_edits"in r&&(u.options.new_edits=r.new_edits),u.docs=r.docs||r,Z(e,u,(function(){return n.call(this,u.docs,u.options)}))}},allDocs:function(t,n,e){return function(r,o){var i=Y(t,this,r,o);return Z(e,i,tt(n,i))}}};V.bulkGet=V.allDocs,V.changes=function(t,n,e){return function(r,o){var i=Y(t,this,r,o);return Z(e,i,tt(n,i))}},V.sync=function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.url=r,Z(e,u,(function(){return n.call(this,u.url,u.options)}))}},V["replicate.from"]=V.sync,V["replicate.to"]=V.sync,V.putAttachment=function(t,n,e){return function(r,o,i,u,c,s,a){var f;return"string"==typeof c?((f=Y(t,this,s,a)).rev=i,f.doc=u,f.type=c):((f=Y(t,this,c,s)).rev=null,f.doc=i,f.type=u),f.docId=r,f.attachmentId=o,Z(e,f,(function(){return n.call(this,f.docId,f.attachmentId,f.rev,f.doc,f.type)}))}},V.getAttachment=function(t,n,e){return function(r,o,i,u){var c=Y(t,this,i,u);return c.docId=r,c.attachmentId=o,Z(e,c,(function(){return n.call(this,c.docId,c.attachmentId,c.options)}))}},V.removeAttachment=function(t,n,e){return function(r,o,i,u,c){var s=Y(t,this,u,c);return s.docId=r,s.attachmentId=o,s.rev=i,Z(e,s,(function(){return n.call(this,s.docId,s.attachmentId,s.rev)}))}},V.query=function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.fun=r,Z(e,u,(function(){return n.call(this,u.fun,u.options)}))}},V.viewCleanup=function(t,n,e){return function(r,o){var i=Y(t,this,r,o);return Z(e,i,tt(n,i))}},V.createIndex=function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.index=r,Z(e,u,(function(){return n.call(this,u.index)}))}},V.deleteIndex=V.createIndex,V.find=function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.request=r,Z(e,u,(function(){return n.call(this,u.request)}))}},V.explain=V.find,V.info=function(t,n,e){return function(r,o){var i=Y(t,this,r,o);return Z(e,i,$(n))}},V.getIndexes=V.info,V.compact=function(t,n,e){return function(r,o){var i=Y(t,this,r,o);return Z(e,i,tt(n,i))}},V.revsDiff=function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.diff=r,Z(e,u,(function(){return n.call(this,u.diff)}))}},V.list=function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.path=r,Z(e,u,(function(){return n.call(this,u.path,u.options)}))}},V.rewriteResultRequestObject=V.list,V.show=V.list,V.update=V.list,V.getSecurity=function(t,n,e){return function(r,o){var i=Y(t,this,r,o);return Z(e,i,tt(n,i))}},V.putSecurity=function(t,n,e){return function(r,o,i){var u=Y(t,this,o,i);return u.secObj=r,Z(e,u,(function(){return n.call(this,u.secObj)}))}};var X={};function Y(t,n,e,r){return"function"==typeof e&&(r=e,e={}),{base:t||n,options:e||{},callback:r}}function Z(t,n,e){var r=n.callback;delete n.callback,e=e.bind(n.base);for(var o=t.length-1;o>=0;o-=1)e=t[o].bind(null,e,n);var i=e();return K(i,r),i}function $(t){return function(){return t.call(this)}}function tt(t,n){return function(){return t.call(this,n.options)}}X.new=function(t,n,e){return function(r,o,i){var u;return"object"==typeof r?u=Y(t,this,r,o):(u=Y(t,this,o,i)).options.name=r,Z(e,u,(function(){return n.call(this,u.options)}))}},X.destroy=function(t,n,e){return function(r,o,i){var u;return"object"==typeof r?u=Y(t,this,r,o):(u=Y(t,this,o,i)).options.name=r,u.options.internal?n.apply(t,arguments):Z(e,u,(function(){var t=u.options.name;return delete u.options.name,n.call(this,t,u.options)}))}},X.replicate=function(t,n,e){return function(r,o,i,u){var c=Y(t,this,i,u);return c.source=r,c.target=o,Z(e,c,(function(){return n.call(this,c.source,c.target,c.options)}))}},X.allDbs=function(t,n,e){return function(r,o){var i=Y(t,this,r,o);return Z(e,i,$(n))}};var nt={};(function(e){(function(){"use strict";function r(t){return"_"!==t[0]}function o(t){return!("string"!=typeof t._id||!J.isLocalId(t._id))||!!t._deleted&&0===Object.keys(t).filter(r).length}nt.transform=nt.filter=function(r){var i=function(t){return!o(t)&&r.incoming?r.incoming(J.clone(t)):t},u=function(t){return!o(t)&&r.outgoing?r.outgoing(J.clone(t)):t},c={};"http"===this.type()&&(c.put=function(t,n){return n.doc=i(n.doc),t()},c.query=function(t){var n={};return t().then((function(t){return J.Promise.all(t.rows.map((function(t){return t.doc?u(t.doc):n}))).then((function(e){return e.forEach((function(e,r){e!==n&&(t.rows[r].doc=e)})),t}))}))}),c.get=function(t){return t().then((function(t){if(Array.isArray(t)){var n={};return J.Promise.all(t.map((function(t){return t.ok?u(t.ok):n}))).then((function(e){return e.forEach((function(e,r){e!==n&&(t[r].ok=e)})),t}))}return u(t)}))},c.bulkDocs=function(t,e){for(var r=0;r<e.docs.length;r++)e.docs[r]=i(e.docs[r]);return n.all(e.docs).then((function(n){return e.docs=n,t()}))},c.allDocs=function(t){return t().then((function(t){var n={};return J.Promise.all(t.rows.map((function(t){return t.doc?u(t.doc):n}))).then((function(e){return e.forEach((function(e,r){e!==n&&(t.rows[r].doc=e)})),t}))}))},c.bulkGet=function(t){return t().then((function(t){var n={};return J.Promise.all(t.results.map((function(t){return t.id&&t.docs&&Array.isArray(t.docs)?{docs:t.docs.map((function(t){return t.ok?{ok:u(t.ok)}:t})),id:t.id}:n}))).then((function(t){return{results:t}}))}))},c.changes=function(n){function r(t){return t.doc?J.Promise.resolve(u(t.doc)).then((function(n){return t.doc=n,t})):J.Promise.resolve(t)}function o(t){return t.results?J.Promise.all(t.results.map(r)).then((function(n){return t.results=n,t})):J.Promise.resolve(t)}var i=n(),c=i.on;i.on=function(n,u){return"change"===n?c.apply(i,[n,function(n){r(n).then((function(n){t((function(){u(n)}))}))}]):"complete"===n?c.apply(i,[n,function(t){o(t).then((function(t){e.nextTick((function(){u(t)}))}))}]):c.apply(i,[n,u])};var s=i.then;return i.then=function(t,n){return s.apply(i,[function(e){return o(e).then(t,n)},n])},i},U.installWrapperMethods(this,c)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(nt)}).call(this)}).call(this,P)}();
